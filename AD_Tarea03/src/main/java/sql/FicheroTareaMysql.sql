-- CREACIÓN DE LAS TABLAS VUELOS Y PASAJEROS EN MYSQL

-- Eliminar tablas si existen
DROP TABLE IF EXISTS PASAJEROS;
DROP TABLE IF EXISTS VUELOS;

-- Crear la tabla VUELOS
CREATE TABLE VUELOS (
  COD_VUELO VARCHAR(10) PRIMARY KEY,
  HORA_SALIDA DATETIME,
  DESTINO VARCHAR(15),
  PROCEDENCIA VARCHAR(15),
  PLAZAS_FUMADOR INT(3),
  PLAZAS_NO_FUMADOR INT(3),
  PLAZAS_TURISTA INT(3),
  PLAZAS_PRIMERA INT(3)
);

-- Crear la tabla PASAJEROS con restricciones
CREATE TABLE PASAJEROS (
  NUM INT(7),
  COD_VUELO VARCHAR(10),
  TIPO_PLAZA VARCHAR(2), -- 'TU': TURISTA, 'PR': PRIMERA
  FUMADOR VARCHAR(2), -- 'SI' O 'NO'
  PRIMARY KEY (NUM, COD_VUELO),
  CONSTRAINT FK_PASAJEROS FOREIGN KEY (COD_VUELO) REFERENCES VUELOS(COD_VUELO)
);

-- INSERTAR DATOS EN LA TABLA VUELOS con formato DATETIME para HORA_SALIDA
INSERT INTO VUELOS VALUES ('IB-SP-4567', '1999-03-27 10:30:00', 'PARIS', 'MADRID', 100, 100, 160, 40);
INSERT INTO VUELOS VALUES ('IB-BA-46DC', '1999-03-28 12:30:00', 'ROMA', 'MADRID', 90, 100, 160, 30);
INSERT INTO VUELOS VALUES ('FR-DC-4667', '1999-03-28 13:30:00', 'BRUSELAS', 'SEVILLA', 90, 100, 160, 30);
INSERT INTO VUELOS VALUES ('AV-DC-347', '1999-03-29 13:35:00', 'VALENCIA', 'ROMA', 100, 200, 210, 90);
INSERT INTO VUELOS VALUES ('SP-DC-438', '1999-03-30 09:20:00', 'MOSCÚ', 'SEVILLA', 90, 100, 160, 30);
INSERT INTO VUELOS VALUES ('AI-D7-347', '1999-03-30 13:35:00', 'BILBAO', 'MOSCÚ', 100, 200, 210, 90);
INSERT INTO VUELOS VALUES ('IB-D5-347', '1999-04-01 13:35:00', 'ZARAGOZA', 'PARIS', 100, 200, 210, 90);
INSERT INTO VUELOS VALUES ('FR-DC7-247', '1999-04-01 15:35:00', 'CORDOBA', 'EL CAIRO', 100, 100, 100, 100);
INSERT INTO VUELOS VALUES ('AV-DC9-233', '1999-04-01 17:35:00', 'VALENCIA', 'SOFÍA', 100, 100, 100, 100);
INSERT INTO VUELOS VALUES ('FR-DC2-269', '1999-04-01 19:00:00', 'CÓRDOBA', 'MANILA', 100, 100, 180, 20);
INSERT INTO VUELOS VALUES ('IB-98779', '1999-04-02 08:00:00', 'MADRID', 'LIMA', 200, 100, 250, 50);
INSERT INTO VUELOS VALUES ('AV-DC2-269', '1999-04-02 12:00:00', 'MADRID', 'LA HAYA', 100, 100, 180, 20);
INSERT INTO VUELOS VALUES ('AI-1289-9', '1999-04-02 14:30:00', 'BARCELONA', 'BONN', 150, 100, 180, 70);

-- INSERTAR DATOS EN LA TABLA PASAJEROS
INSERT INTO PASAJEROS VALUES (123, 'IB-SP-4567', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (124, 'IB-SP-4567', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (125, 'IB-SP-4567', 'PR', 'NO');
INSERT INTO PASAJEROS VALUES (126, 'IB-BA-46DC', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (127, 'IB-BA-46DC', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (128, 'FR-DC-4667', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (129, 'FR-DC-4667', 'TU', 'SI');

INSERT INTO PASAJEROS VALUES (130, 'AV-DC9-233', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (131, 'AV-DC9-233', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (132, 'AV-DC9-233', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (133, 'IB-D5-347', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (134, 'IB-D5-347', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (135, 'IB-D5-347', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (136, 'IB-D5-347', 'TU', 'SI');

INSERT INTO PASAJEROS VALUES (137, 'FR-DC-4667', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (138, 'FR-DC-4667', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (139, 'FR-DC-4667', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (126, 'FR-DC-4667', 'PR', 'SI');

INSERT INTO PASAJEROS VALUES (130, 'AV-DC2-269', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (131, 'AV-DC2-269', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (132, 'AV-DC2-269', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (133, 'AI-1289-9', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (134, 'AI-1289-9', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (135, 'AI-1289-9', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (136, 'AI-1289-9', 'TU', 'SI');

INSERT INTO PASAJEROS VALUES (137, 'SP-DC-438', 'TU', 'SI');
INSERT INTO PASAJEROS VALUES (138, 'SP-DC-438', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (139, 'SP-DC-438', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (140, 'SP-DC-438', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (141, 'FR-DC7-247', 'PR', 'SI');
INSERT INTO PASAJEROS VALUES (142, 'FR-DC7-247', 'TU', 'NO');
INSERT INTO PASAJEROS VALUES (143, 'FR-DC7-247', 'TU', 'SI');

-- Confirma las transacciones
COMMIT;